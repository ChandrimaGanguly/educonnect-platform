version: "1.0.0"
name: "OpenSpec Standard Rubric"
description: "Comprehensive evaluation criteria for OpenSpec specifications"

categories:
  - id: introduction
    name: "Introduction & Context"
    description: "Foundational information about the specification"
    weight: 0.10
    criteria:
      - id: intro.purpose
        name: "Purpose Statement"
        description: "Clear statement of what the spec defines"
        required: true
        evaluationType: presence
        checkFunction: "checkPurposeSection"
        guidance: "Look for H2 '## Purpose' section with clear description"

      - id: intro.purpose_clarity
        name: "Purpose Clarity"
        description: "Purpose statement is clear and concise"
        required: true
        evaluationType: quality
        checkFunction: "checkPurposeClarity"
        guidance: "Purpose should be 1-3 sentences explaining the feature's goal"

      - id: intro.scope
        name: "Scope Definition"
        description: "Boundaries of what is included/excluded"
        required: false
        evaluationType: quality
        checkFunction: "checkScopeInContent"
        guidance: "Look for explicit scope statements in purpose or intro"

      - id: intro.title
        name: "Descriptive Title"
        description: "Specification has a clear, descriptive title"
        required: true
        evaluationType: presence
        checkFunction: "checkTitle"
        guidance: "First H1 heading should clearly identify the feature"

  - id: functional_requirements
    name: "Functional Requirements"
    description: "Core functional specifications"
    weight: 0.30
    criteria:
      - id: func.requirements_section
        name: "Requirements Section Exists"
        description: "Has a dedicated Requirements section"
        required: true
        evaluationType: presence
        checkFunction: "checkRequirementsSection"
        guidance: "Look for H2 '## Requirements' section"

      - id: func.requirement_count
        name: "Sufficient Requirements"
        description: "Contains at least 3 requirements"
        required: true
        evaluationType: count
        checkFunction: "countRequirements"
        guidance: "Count H3 sections starting with 'Requirement:'"

      - id: func.requirement_structure
        name: "Proper Requirement Structure"
        description: "Requirements follow H3 'Requirement: [Name]' format"
        required: true
        evaluationType: quality
        checkFunction: "checkRequirementStructure"
        guidance: "Each requirement should be an H3 heading with 'Requirement:' prefix"

      - id: func.rfc_language
        name: "RFC 2119 Keywords"
        description: "Uses SHALL/SHOULD/MAY/MUST appropriately"
        required: true
        evaluationType: quality
        checkFunction: "checkRFCLanguage"
        guidance: "Requirements should use SHALL/MUST for mandatory, SHOULD for recommended, MAY for optional"

      - id: func.rfc_consistency
        name: "Consistent RFC Usage"
        description: "RFC keywords are used consistently throughout"
        required: true
        evaluationType: quality
        checkFunction: "checkRFCConsistency"
        guidance: "Most requirements should have at least one RFC keyword"

      - id: func.testability
        name: "Testable Requirements"
        description: "Requirements have verifiable scenarios"
        required: true
        evaluationType: quality
        checkFunction: "checkTestability"
        guidance: "Each requirement should have at least one scenario"

      - id: func.requirement_clarity
        name: "Clear Requirement Statements"
        description: "Requirements are specific and unambiguous"
        required: true
        evaluationType: quality
        checkFunction: "checkRequirementClarity"
        guidance: "Requirements should have clear descriptions, not just titles"

  - id: scenarios_use_cases
    name: "Scenarios & Use Cases"
    description: "Scenario coverage and quality"
    weight: 0.15
    criteria:
      - id: scenarios.coverage
        name: "Scenario Coverage"
        description: "Each requirement has at least one scenario"
        required: true
        evaluationType: completeness
        checkFunction: "checkScenarioCoverage"
        guidance: "Count requirements with scenarios vs without"

      - id: scenarios.format
        name: "GIVEN-WHEN-THEN Format"
        description: "Scenarios use proper format"
        required: true
        evaluationType: quality
        checkFunction: "checkScenarioFormat"
        guidance: "Look for GIVEN-WHEN-THEN bullet structure in scenarios"

      - id: scenarios.completeness
        name: "Complete Scenarios"
        description: "Scenarios have all three parts (GIVEN, WHEN, THEN)"
        required: true
        evaluationType: quality
        checkFunction: "checkScenarioCompleteness"
        guidance: "Each scenario should have GIVEN, WHEN, and THEN sections"

      - id: scenarios.structure
        name: "Proper Scenario Structure"
        description: "Scenarios follow H4 'Scenario: [Name]' format"
        required: true
        evaluationType: quality
        checkFunction: "checkScenarioStructure"
        guidance: "Scenarios should be H4 headings under requirements"

      - id: scenarios.edge_cases
        name: "Edge Case Coverage"
        description: "Includes error and edge case scenarios"
        required: false
        evaluationType: presence
        checkFunction: "checkEdgeCases"
        guidance: "Look for failure scenarios, validation, error handling"

      - id: scenarios.multiple
        name: "Multiple Scenarios per Requirement"
        description: "Requirements have multiple scenarios for coverage"
        required: false
        evaluationType: quality
        checkFunction: "checkMultipleScenarios"
        guidance: "Complex requirements should have 2+ scenarios"

  - id: non_functional_requirements
    name: "Non-Functional Requirements"
    description: "Performance, security, usability requirements"
    weight: 0.20
    criteria:
      - id: nfr.section_exists
        name: "NFR Section Exists"
        description: "Has dedicated non-functional requirements section"
        required: true
        evaluationType: presence
        checkFunction: "checkNonFunctionalSection"
        guidance: "Look for H2 '## Non-Functional Requirements'"

      - id: nfr.performance
        name: "Performance Requirements"
        description: "Specifies performance targets"
        required: true
        evaluationType: presence
        checkFunction: "checkPerformanceRequirements"
        guidance: "Look for timing, throughput, latency specs"

      - id: nfr.scalability
        name: "Scalability Requirements"
        description: "Defines scale and growth targets"
        required: true
        evaluationType: presence
        checkFunction: "checkScalabilityRequirements"
        guidance: "Look for user count, data volume, concurrent usage specs"

      - id: nfr.availability
        name: "Availability Requirements"
        description: "Uptime and reliability targets"
        required: false
        evaluationType: presence
        checkFunction: "checkAvailabilityRequirements"
        guidance: "Look for uptime percentage, availability targets"

      - id: nfr.security
        name: "Security Considerations"
        description: "Addresses security concerns"
        required: false
        evaluationType: presence
        checkFunction: "checkSecurityRequirements"
        guidance: "Look for security, authentication, authorization specs"

      - id: nfr.data_integrity
        name: "Data Integrity"
        description: "Specifies data consistency and integrity requirements"
        required: false
        evaluationType: presence
        checkFunction: "checkDataIntegrity"
        guidance: "Look for transaction, consistency, integrity requirements"

      - id: nfr.quantified
        name: "Quantified Metrics"
        description: "NFRs have measurable targets"
        required: true
        evaluationType: quality
        checkFunction: "checkQuantifiedNFRs"
        guidance: "NFRs should have numbers, percentages, or measurable criteria"

  - id: technical_requirements
    name: "Technical Requirements"
    description: "Technical implementation details"
    weight: 0.10
    criteria:
      - id: tech.constraints
        name: "Technical Constraints"
        description: "Identifies technical limitations or constraints"
        required: false
        evaluationType: presence
        checkFunction: "checkTechnicalConstraints"
        guidance: "Look for constraints, limitations, or technical restrictions mentioned"

      - id: tech.dependencies
        name: "Dependencies Mentioned"
        description: "References dependencies on other systems or features"
        required: false
        evaluationType: presence
        checkFunction: "checkDependencies"
        guidance: "Look for mentions of required features, services, or integrations"

      - id: tech.architecture
        name: "Architecture Considerations"
        description: "References architectural patterns or approaches"
        required: false
        evaluationType: presence
        checkFunction: "checkArchitectureReferences"
        guidance: "Look for architecture, design pattern, or technical approach mentions"

  - id: quality_assurance
    name: "Testing & QA"
    description: "Testing and quality assurance considerations"
    weight: 0.05
    criteria:
      - id: qa.acceptance_criteria
        name: "Clear Acceptance Criteria"
        description: "Scenarios serve as acceptance criteria"
        required: true
        evaluationType: quality
        checkFunction: "checkAcceptanceCriteria"
        guidance: "GIVEN-WHEN-THEN scenarios provide testable acceptance criteria"

      - id: qa.verification
        name: "Verifiable Outcomes"
        description: "Scenarios have clear, verifiable outcomes"
        required: true
        evaluationType: quality
        checkFunction: "checkVerifiableOutcomes"
        guidance: "THEN clauses should describe specific, observable outcomes"

  - id: documentation_quality
    name: "Documentation Quality"
    description: "Overall documentation quality"
    weight: 0.05
    criteria:
      - id: docs.structure
        name: "Clear Structure"
        description: "Well-organized with proper heading hierarchy"
        required: true
        evaluationType: quality
        checkFunction: "checkDocumentStructure"
        guidance: "Proper heading hierarchy (H1 > H2 > H3 > H4), logical flow"

      - id: docs.completeness
        name: "Section Completeness"
        description: "All major sections are present"
        required: true
        evaluationType: completeness
        checkFunction: "checkSectionCompleteness"
        guidance: "Has title, purpose, requirements, and non-functional sections minimum"

      - id: docs.formatting
        name: "Consistent Formatting"
        description: "Uses consistent markdown formatting"
        required: true
        evaluationType: quality
        checkFunction: "checkFormatting"
        guidance: "Consistent use of headings, lists, emphasis"

  - id: maintenance_operations
    name: "Maintenance & Operations"
    description: "Operational and maintenance considerations"
    weight: 0.05
    criteria:
      - id: ops.monitoring
        name: "Monitoring Requirements"
        description: "Specifies monitoring/observability needs"
        required: false
        evaluationType: presence
        checkFunction: "checkMonitoringRequirements"
        guidance: "Look for logging, metrics, alerting requirements"

      - id: ops.operational
        name: "Operational Considerations"
        description: "Addresses operational concerns"
        required: false
        evaluationType: presence
        checkFunction: "checkOperationalConsiderations"
        guidance: "Look for deployment, maintenance, support considerations"
